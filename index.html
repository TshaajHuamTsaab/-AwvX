<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>è±¡å¾å¿—ä¸‰æ®µå¿—</title>
<style>
body {
  margin: 0;
  font-family: "Microsoft YaHei", sans-serif;
  background: black;
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
}
h1 { margin-bottom: 20px; font-size: 2.5em; }
.line {
  margin: 15px 0;
  text-align: center;
}
.highlight {
  color: gold;
  font-weight: bold;
  background: rgba(255, 215, 0, 0.2);
  display: inline-block;
  padding: 2px 5px;
}
.controls {
  position: absolute;
  bottom: 20px;
}
button {
  margin: 10px;
  padding: 15px 30px;
  border: none;
  border-radius: 10px;
  font-size: 1.2em;
  cursor: pointer;
  font-weight: bold;
}
#playBtn { background: royalblue; color: white; }
#stopBtn { background: crimson; color: white; }
.navBtn { background: seagreen; color: white; }
#switchBtn { background: orange; color: black; }
#successBtn {
  display: none;
  position: absolute;
  top: 20px;
  font-size: 1.5em;
  background: gold;
  color: black;
  font-weight: bold;
  padding: 10px 20px;
  border-radius: 8px;
}
#fontControls {
  position: absolute;
  bottom: 20px;
  left: 20px;
}
#fontControls button {
  width: 50px;
  height: 50px;
  font-size: 1.5em;
  padding: 0;
  margin: 5px;
}
#explainBtn {
  position: absolute;
  top: 20px;
  right: 20px;
  font-size: 1.2em;
  padding: 10px 20px;
  font-weight: bold;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
  background-size: 400% 100%;
  color: white;
  animation: rainbow 4s linear infinite;
}
@keyframes rainbow {
  0% {background-position:0% 50%;}
  50% {background-position:100% 50%;}
  100% {background-position:0% 50%;}
}
canvas {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: -1;
}
#explanationBox {
  display: none;
  position: absolute;
  top: 80px;
  right: 20px;
  width: 350px;
  max-height: 60vh;
  overflow-y: auto;
  background: rgba(0,0,0,0.8);
  color: white;
  border-radius: 10px;
  padding: 15px;
  font-size: 0.95em;
  line-height: 1.5em;
}
</style>
</head>
<body>
<canvas id="space"></canvas>
<h1 id="title">è¿‡å»</h1>
<div id="text"></div>

<div class="controls">
  <button class="navBtn" onclick="prevPage()">ä¸Šä¸€é¡µ</button>
  <button id="playBtn" onclick="playText()">æ’­æ”¾æœ—è¯»</button>
  <button id="stopBtn" onclick="stopText()">åœæ­¢æœ—è¯»</button>
  <button class="navBtn" onclick="nextPage()">ä¸‹ä¸€é¡µ</button>
  <button id="switchBtn" class="navBtn" onclick="switchOrder()">åˆ‡æ¢é¡ºåº</button>
</div>

<div id="fontControls">
  <button onclick="changeFontSize(2)">+</button>
  <button onclick="changeFontSize(-2)">-</button>
</div>

<button id="successBtn">ç¥ä½ æˆåŠŸğŸ†</button>
<button id="explainBtn" onclick="toggleExplanation()">è§£é‡Šç»æ–‡</button>

<div id="explanationBox">
  <p>â€œä¸æƒ§å›°éš¾åšæŒï¼Œç§¯ç´¯ç»ˆæœ‰æˆã€‚â€<br>
  æé†’ä½ ï¼šé¢å¯¹æŒ‘æˆ˜å’Œå›°éš¾ä¸è¦é€€ç¼©ï¼ŒåšæŒä¸æ‡ˆåœ°ç§¯ç´¯ç»éªŒå’ŒåŠªåŠ›ã€‚<br>
  æ„æ€æ˜¯ï¼šæŒç»­åŠªåŠ›ç»ˆä¼šæœ‰æ”¶è·ï¼ŒæˆåŠŸæ˜¯ç§¯ç´¯çš„ç»“æœã€‚<br>
  è¡ŒåŠ¨ä¸ä¿®å…»çš„æˆé•¿è·¯çº¿ï¼šæ˜ç¡®æ–¹å‘ â†’ ç«‹è¶³å½“ä¸‹ â†’ ä¿®å…»å“å¾· â†’ å–„å¾…ä»–äºº â†’ åšæŒç§¯ç´¯ â†’ æˆå°±ç›®æ ‡ã€‚</p>

  <p>â€œå¿—æ„¿é•¿è¿œè§„åˆ’ï¼Œä¸å›°äºä¸€æ—¶ã€‚â€<br>
  æ„æ€æ˜¯ï¼šåˆ¶å®šç›®æ ‡å’Œå¿—å‘æ—¶ï¼Œè¦æœ‰é•¿è¿œçœ¼å…‰ï¼Œä¸è¢«çœ¼å‰çš„å¾—å¤±æˆ–çŸ­æœŸå›°éš¾æ‰€æŸç¼šã€‚<br>
  å¼ºè°ƒæˆ˜ç•¥æ€§æ€ç»´ä¸è€å¿ƒï¼Œç›®å…‰æ”¾è¿œæ‰èƒ½ç¨³æ­¥å‘å±•ã€‚</p>

  <p>â€œä¼ æ‰¿ç²¾ç¥ä»·å€¼ï¼Œä¸åªä¸ºå·±ã€‚â€<br>
  ä½ çš„åŠªåŠ›ä¸ä»…æ˜¯ä¸ºäº†ä¸ªäººåˆ©ç›Šï¼Œè¿˜åº”è€ƒè™‘ä¼ æ‰¿ç²¾ç¥ã€æ–‡åŒ–æˆ–æ­£é¢ä»·å€¼ã€‚<br>
  å¼ºè°ƒä½¿å‘½æ„Ÿå’Œç¤¾ä¼šè´£ä»»ï¼Œè®©è¡ŒåŠ¨æœ‰æ›´é«˜å±‚æ¬¡çš„æ„ä¹‰ã€‚</p>

  <p>â€œç§¯ç´¯æ™ºæ…§ç»éªŒï¼Œæƒ æ³½åä»£ã€‚â€<br>
  æ„æ€æ˜¯ï¼šä¸ä»…å…³æ³¨è‡ªå·±çš„æˆé•¿ï¼Œä¹Ÿè¦ç§¯ç´¯çŸ¥è¯†å’Œç»éªŒï¼Œèƒ½å¤Ÿå¸®åŠ©åäººæˆ–ä¸‹ä¸€ä»£å—ç›Šã€‚<br>
  ä¸ªäººä»·å€¼æœ€ç»ˆä½“ç°ä¸ºå¯¹ç¤¾ä¼šæˆ–åä»£çš„è´¡çŒ®ã€‚</p>

  <p>â€œå¿ƒæ€€å®½å¹¿èƒ¸è¥Ÿï¼Œå®¹çº³ä¸åŒã€‚â€<br>
  è¦æœ‰å¼€é˜”çš„å¿ƒæ€ï¼Œèƒ½å¤ŸåŒ…å®¹ä¸åŒçš„è§‚ç‚¹ã€æ„è§å’Œæ–‡åŒ–ã€‚<br>
  æ„æ€æ˜¯ï¼šå®½å®¹å’Œç†è§£ä»–äººï¼Œä½¿äººé™…å…³ç³»æ›´å’Œè°ï¼Œä¹Ÿåˆ©äºé•¿æœŸå‘å±•ã€‚</p>

  <p>â€œä¿æŒç»ˆèº«å­¦ä¹ ï¼Œä¸åœäºæˆã€‚â€<br>
  æ„æ€æ˜¯ï¼šæˆé•¿æ˜¯ç»ˆèº«çš„è¿‡ç¨‹ï¼Œæ°¸è¿œä¿æŒå­¦ä¹ ä¸è¿›æ­¥çš„å¿ƒæ€ã€‚<br>
  ç›®æ ‡é•¿è¿œ â†’ è¶…è¶Šè‡ªæˆ‘ â†’ ç§¯ç´¯æ™ºæ…§ â†’ å®½å®¹åŒ…å®¹ â†’ æŒç»­å­¦ä¹ ã€‚</p>
</div>

<script>
// ---------- æ–‡æœ¬æ•°æ®å’ŒåŠŸèƒ½ ----------
let pages = [
  { title: "è¿‡å»", lines: ["åˆå¿ƒæ˜¯å¦çœŸè¯šï¼Œä¸ä¸ºè™šè£å·¦å³ã€‚","å¿—è¡Œæ˜¯å¦ä¸€è‡´ï¼Œè¡ŒåŠ¨é…å¾—å¿—ã€‚","å¾—å¤±èƒ½å¦æ€»ç»“ï¼Œé”™è¯¯åŒ–ä¸ºåŠ›ã€‚","å¿—å‘æ˜¯å¦å…¼é¡¾ï¼Œä¸æŸä»–äººåˆ©ã€‚","å¿—æ„¿æ˜¯å¦é€‚æ—¶ï¼Œç¯å¢ƒèƒ½ç›¸åˆã€‚"] },
  { title: "ç°åœ¨", lines: ["æ˜ç¡®æ–¹å‘ä¸“æ³¨ï¼Œä¸éšæ½®æµæ‘‡æ‘†ã€‚","ç«‹è¶³å½“ä¸‹è¡ŒåŠ¨ï¼Œä¸æ‹–å»¶ç©ºå¹»æƒ³ã€‚","ä¿®å…»å“å¾·å¿ƒå¢ƒï¼Œå¿—ä¸ç¦»äºå¾·ã€‚","å¹¿ç»“å–„ç¼˜åŠ©äººï¼Œè¡Œè·¯æœ‰äººæ‰¶ã€‚","ä¸æƒ§å›°éš¾åšæŒï¼Œç§¯ç´¯ç»ˆæœ‰æˆã€‚"] },
  { title: "æœªæ¥", lines: ["å¿—æ„¿é•¿è¿œè§„åˆ’ï¼Œä¸å›°äºä¸€æ—¶ã€‚","ä¼ æ‰¿ç²¾ç¥ä»·å€¼ï¼Œä¸åªä¸ºå·±ã€‚","ç§¯ç´¯æ™ºæ…§ç»éªŒï¼Œæƒ æ³½åä»£ã€‚","å¿ƒæ€€å®½å¹¿èƒ¸è¥Ÿï¼Œå®¹çº³ä¸åŒã€‚","ä¿æŒç»ˆèº«å­¦ä¹ ï¼Œä¸åœäºæˆã€‚"] }
];
let currentPage = 0;
let container = document.getElementById("text");
let title = document.getElementById("title");
let reading = false;
let synth = window.speechSynthesis;
let utterance;
let allLines;
let topToBottom = true;
let fontSize = 2;

function renderText() {
  container.innerHTML = "";
  title.textContent = pages[currentPage].title;
  let lines = topToBottom ? pages[currentPage].lines : [...pages[currentPage].lines].reverse();
  lines.forEach(line => {
    let div = document.createElement("div");
    div.className = "line";
    div.style.fontSize = fontSize + "em";
    div.textContent = line;
    container.appendChild(div);
  });
}
renderText();

function nextPage(){if(currentPage<pages.length-1){currentPage++;renderText();}}
function prevPage(){if(currentPage>0){currentPage--;renderText();}}
function switchOrder(){topToBottom = !topToBottom; renderText();}
function changeFontSize(delta){fontSize+=delta;if(fontSize<0.5)fontSize=0.5;renderText();}

// ---------- æœ—è¯»åŠŸèƒ½ ----------
function playText(){
  stopText();
  reading=true;
  let currentLine=0;
  allLines = container.querySelectorAll(".line");
  function speakNextLine(){
    if(!reading) return;
    if(currentLine>=allLines.length){
      if(currentPage<pages.length-1){currentPage++;renderText();currentLine=0;allLines=container.querySelectorAll(".line");speakNextLine();}
      else{document.getElementById("successBtn").style.display="block";return;}
    }
    let lineDiv=allLines[currentLine];
    let lineText=lineDiv.textContent;
    utterance=new SpeechSynthesisUtterance(lineText);
    utterance.lang="zh-CN";
    utterance.rate=0.9;
    utterance.pitch=1;
    let voices = synth.getVoices();
    let female = voices.find(v=>v.lang==="zh-CN"&&/female|huihui|xiaoxiao/i.test(v.name));
    if(female) utterance.voice=female;
    lineDiv.classList.add("highlight");
    utterance.onend=()=>{lineDiv.classList.remove("highlight");currentLine++;speakNextLine();}
    synth.speak(utterance);
  }
  speakNextLine();
}
function stopText(){reading=false;if(synth.speaking)synth.cancel();container.querySelectorAll(".line").forEach(s=>s.classList.remove("highlight"));}

// ---------- è§£é‡Šç»æ–‡ ----------
function toggleExplanation(){
  let box = document.getElementById("explanationBox");
  box.style.display = box.style.display==="block"?"none":"block";
}

// ---------- èƒŒæ™¯å®‡å®™åŠ¨ç”» ----------
let canvas=document.getElementById("space");
let ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
let stars=Array.from({length:200},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.5,o:Math.random()}));
let satellites=[];
function drawEarth(){let earthX=canvas.width*0.8,earthY=canvas.height*0.8,radius=120;let gradient=ctx.createRadialGradient(earthX-30,earthY-30,50,earthX,earthY,radius);gradient.addColorStop(0,"#1E90FF");gradient.addColorStop(1,"#001f3f");ctx.beginPath();ctx.arc(earthX,earthY,radius,0,Math.PI*2);ctx.fillStyle=gradient;ctx.fill();}
function drawStars(){stars.forEach(s=>{ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fillStyle=`rgba(255,255,255,${Math.abs(Math.sin(Date.now()/1000+s.o))})`;ctx.fill();});}
function drawSatellites(){satellites.forEach((sat,i)=>{ctx.save();ctx.translate(sat.x,sat.y);ctx.rotate(sat.angle);ctx.fillStyle="lightgray";ctx.fillRect(-10,-5,20,10);ctx.fillStyle="silver";ctx.fillRect(-20,-2,40,4);ctx.restore();sat.x+=sat.vx;sat.y+=sat.vy;sat.life-=1;if(sat.life<=0)satellites.splice(i,1);});}
function loop(){ctx.clearRect(0,0,canvas.width,canvas.height);drawStars();drawEarth();drawSatellites();if(Math.random()<0.01){satellites.push({x:-50,y:100+Math.random()*canvas.height/2,vx:3,vy:0.5,angle:Math.random()*Math.PI,life:150});}requestAnimationFrame(loop);}
loop();
window.addEventListener("resize",()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});
</script>
</body>
</html>
